(this["webpackJsonprock-paper-scissor"]=this["webpackJsonprock-paper-scissor"]||[]).push([[0],[,,,function(e){e.exports=JSON.parse("[[255,255,255],[255,0,0],[0,255,0],[0,0,255],[255,255,0],[0,255,255],[255,0,255],[255,127,0],[0,255,127],[127,0,255],[127,255,0],[0,127,255],[255,0,127]]")},function(e){e.exports=JSON.parse('[{"teams":[1,2,3],"pairs":[[1,2],[2,3],[3,1]]},{"teams":[4,5,6],"pairs":[[4,5],[5,6],[6,4]]},{"teams":[7,8,9],"pairs":[[7,8],[8,9],[9,7]]},{"teams":[10,11,12],"pairs":[[10,11],[11,12],[12,10]]},{"teams":[1,2,3,4],"pairs":[[1,2],[2,3],[3,4],[4,1]]},{"teams":[1,2,3,4,7],"pairs":[[1,2],[2,3],[3,4],[4,7],[7,1],[1,3],[2,4],[3,7],[4,1],[7,2]]},{"teams":[1,2,3,4,5,6,7],"pairs":[[1,2],[1,3],[1,4],[2,3],[2,4],[2,5],[3,4],[3,5],[3,6],[4,5],[4,6],[4,7],[5,6],[5,7],[5,1],[6,7],[6,1],[6,2],[7,1],[7,2],[7,3]]}]')},,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"Model",(function(){return c}));var i=n(8),a=n(9),r=n(10),c=function(){function e(t,n,i,r){Object(a.a)(this,e),this.width=t,this.height=n,this.maxHealth=i,this.rule=r,this.sprinkleAmount=1,this.initMatrix(),this.run()}return Object(r.a)(e,[{key:"initMatrix",value:function(){this.matrix=new Array(this.width*this.height);for(var e=0;e<this.matrix.length;e++)this.matrix[e]={team:"0",level:0}}},{key:"run",value:function(){var e=this;this.step(),this.renderID=requestAnimationFrame((function(){return e.run()}))}},{key:"pause",value:function(){cancelAnimationFrame(this.renderID)}},{key:"clear",value:function(){this.matrix.length=0,this.initMatrix()}},{key:"sprinkle",value:function(){for(var e=0;e<this.sprinkleAmount;e++){var t=Math.floor(Math.random()*this.matrix.length),n=this.rule.teams[Math.floor(Math.random()*this.rule.teams.length)];this.putIndex(n,t)}}},{key:"putIndex",value:function(e,t){this.matrix[t]={team:e,level:this.maxHealth}}},{key:"put",value:function(e,t,n){t<0||t>=this.width||n<0||n>=this.height||(this.matrix[t+n*this.width]={team:e,level:this.maxHealth})}},{key:"get",value:function(e,t){if(!(e<0||e>=this.width||t<0||t>=this.height))return this.matrix[e+t*this.width]}},{key:"getTeam",value:function(e){return this.matrix[e].team}},{key:"getLevelNorm",value:function(e){return this.matrix[e].level/this.maxHealth}},{key:"step",value:function(){for(var e=0;e<this.height;e++)for(var t=0;t<this.width;t++){var n=this.get(t,e);if("0"!==n.team){var i=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],a=i[Math.floor(Math.random()*i.length)];if(!(a[0]+t<0||a[0]+t>=this.width)&&!(a[1]+e<0||a[1]+e>=this.height)){var r=this.get(a[0]+t,a[1]+e);"0"!==r.team?this.teamWin(n.team,r.team)&&(r.level--,r.level<0&&(n.level=this.maxHealth,r.team=n.team,r.level=n.level-1)):n.level>0&&(r.team=n.team,r.level=n.level-1)}}}}},{key:"teamWin",value:function(e,t){var n,a=Object(i.a)(this.rule.pairs);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(e===r[0]&&t===r[1])return!0}}catch(c){a.e(c)}finally{a.f()}return!1}}]),e}()},function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),r=n(7),c=n.n(r),s=(n(15),n(2)),l=(n(16),n(3)),u=n(0),o=function(e){var t=e.model,n=e.selectedTeam,a=Object(i.useState)(Object(i.useRef)(null)),r=Object(s.a)(a,1)[0],c=Object(i.useState)({pressing:!1,x:0,y:0}),o=Object(s.a)(c,1)[0];Object(i.useEffect)((function(){var e,n=r.current,i=n.getContext("2d");return function a(){for(var r=i.createImageData(n.width,n.height),c=0;c<t.matrix.length;c++){var u=4*c,o=t.getTeam(c),h=0===o?1:(t.getLevelNorm(c)+3)/4,d=Object(s.a)(l[o],3),f=d[0],m=d[1],j=d[2];r.data[u]=f*h,r.data[u+1]=m*h,r.data[u+2]=j*h,r.data[u+3]=255}i.putImageData(r,0,0),e=requestAnimationFrame(a)}(),function(){cancelAnimationFrame(e)}}),[r,t]);return Object(u.jsx)("div",{className:"canvasWrap",children:Object(u.jsx)("canvas",{ref:r,onMouseDown:function(e){o.pressing=!0},onMouseUp:function(e){o.pressing=!1},onMouseMove:function(e){var i=function(e){var t=r.current.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}(e);o.x=Math.floor(i.x),o.y=Math.floor(i.y),o.pressing&&t.put(n,o.x,o.y)},width:t.width,height:t.height})})},h=(n(18),n(19),function(e){var t=e.team,n=l[t],i="rgb(".concat(n[0],", ").concat(n[1],", ").concat(n[2],")");return Object(u.jsx)("div",{className:"color-sticker",style:{backgroundColor:i}})}),d=function(e){var t=e.selected,n=e.label,i=e.team,a=e.func;return Object(u.jsxs)("button",{className:"colorBtn"+(t?" colorBtn-select":""),onClick:function(){return a(i)},children:[Object(u.jsx)("label",{children:"".concat(n)}),Object(u.jsx)(h,{team:i})]})},f=(n(20),function(e){var t=e.rule,n=e.func,i=e.highlight;return Object(u.jsx)("button",{className:"rule-card"+(i?" rule-card-highlight":""),onMouseDown:n,children:t.pairs.map((function(e,t){return Object(u.jsxs)("div",{className:"rule-pair",children:[Object(u.jsx)(h,{team:e[0]})," > ",Object(u.jsx)(h,{team:e[1]})]},t)}))})}),m=(n(21),n(4)),j=function(e){var t=e.showing,n=e.closeFunc,a=e.selectFunc,r=e.model,c=Object(i.useRef)(null);Object(i.useEffect)((function(){c.current.focus()}));return Object(u.jsx)("div",{ref:c,tabIndex:0,className:"rule-select-ui ".concat(t?"":"hiding"),onMouseDown:function(){return n()},onKeyDown:function(e){"Escape"===e.key&&n()},children:Object(u.jsxs)("div",{className:"rule-select-ui-content",onMouseDown:function(e){e.stopPropagation()},children:[Object(u.jsx)("div",{className:"rule-select-ui-header",children:Object(u.jsx)("span",{children:"Select Rule"})}),Object(u.jsx)("div",{className:"rule-select-ui-body",children:m.map((function(e,t){return Object(u.jsx)(f,{highlight:e===r.rule,rule:e,func:function(){return a(e)}},t)}))})]})})};n(22);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.createElement("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"});function O(e,t){var n=e.title,a=e.titleId,r=p(e,["title","titleId"]);return i.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,v)}var x=i.forwardRef(O),g=(n.p,function(e){var t=e.spread,n=e.setSpread,a=e.sprinkleAmount,r=e.setSprinkleAmount,c=e.setDefault,l=Object(i.useState)(!1),o=Object(s.a)(l,2),h=o[0],d=o[1];return Object(u.jsxs)("button",{className:"settings-btn"+(h?" show":""),onClick:function(){return d(!h)},onKeyDown:function(e){return e.stopPropagation()},children:[Object(u.jsx)("div",{className:"header",children:Object(u.jsx)(x,{width:"20",height:"20"})}),h&&Object(u.jsxs)("div",{className:"body",onClick:function(e){return e.stopPropagation()},children:[Object(u.jsxs)("div",{className:"option",children:[Object(u.jsx)("div",{className:"cell",children:Object(u.jsx)("label",{forname:"spread",children:"Spread"})}),Object(u.jsx)("div",{className:"cell",children:Object(u.jsx)("input",{type:"number",id:"spread",min:"1",value:t,onInput:function(e){n(parseInt(e.target.value)||1)}})})]}),Object(u.jsxs)("div",{className:"option",children:[Object(u.jsx)("div",{className:"cell",children:Object(u.jsx)("label",{forname:"sprinkle-amount",children:"Sprinkle Amount"})}),Object(u.jsx)("div",{className:"cell",children:Object(u.jsx)("input",{type:"number",id:"sprinkle-amount",min:"1",value:a,onInput:function(e){r(parseInt(e.target.value)||1)}})})]}),Object(u.jsx)("div",{className:"option",children:Object(u.jsx)("div",{className:"cell",children:Object(u.jsx)("div",{className:"default-btn",onClick:c,children:"Default"})})})]})]})}),k=n(23).Model,y=new k(800,500,12,m[0]),w=function(){var e=Object(i.useState)(y.rule.teams[0]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(!1),c=Object(s.a)(r,2),l=c[0],h=c[1],m=Object(i.useState)(100),b=Object(s.a)(m,2),p=b[0],v=b[1],O=Object(i.useState)(y.maxHealth),x=Object(s.a)(O,2),k=x[0],w=x[1];Object(i.useEffect)((function(){document.addEventListener("keydown",(function(e){e.key>"0"&&e.key<="9"&&N(y.rule.teams[parseInt(e.key)-1]),"s"===e.key&&y.sprinkle()}))}),[]),Object(i.useEffect)((function(){y.maxHealth=k,y.clear()}),[k]),Object(i.useEffect)((function(){y.sprinkleAmount=p}),[p]);var N=function(e){-1!==y.rule.teams.indexOf(e)&&a(e)},M=function(){h(!l)};return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h1",{children:"Color Fight"}),Object(u.jsx)("div",{children:Object(u.jsx)(o,{model:y,selectedTeam:n})}),Object(u.jsxs)("div",{className:"toolbar",children:[y.rule.teams.map((function(e,t){return Object(u.jsx)(d,{label:t+1,selected:n===e,team:e,func:N},t)})),Object(u.jsx)("button",{className:"actionBtn",onClick:function(){return y.sprinkle()},children:"Sprinkle"}),Object(u.jsx)("button",{className:"actionBtn",onClick:function(){return y.clear()},children:"Clear"}),Object(u.jsx)(g,{spread:k,setSpread:w,sprinkleAmount:p,setSprinkleAmount:v,setDefault:function(){w(12),v(100)}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Rule:"}),Object(u.jsx)(f,{rule:y.rule,func:M})]}),Object(u.jsx)(j,{model:y,showing:l,closeFunc:M,selectFunc:function(e){y.rule=e,a(y.rule.teams[0]),y.clear(),h(!1)}})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))};c.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root")),N()}],[[24,1,2]]]);
//# sourceMappingURL=main.b1a5f6f5.chunk.js.map